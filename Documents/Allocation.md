# アロケーション

## 文字列によるアロケーション

　ZStringとTextMeshProを利用して、文字列を表示する際にアロケーションが発生しないようになっている。  

## コレクション、反復処理によるアロケーション

　Updateメソッド内、もしくはUpdateから呼び出されるメソッド内において、以下を意識してコーディングしている。  

- アロケーションを避けるために、配列以外を`foreach`文で扱わない
- LINQを記述する際は、外部の変数を捕獲しない。ラムダ式はすべて`static`で修飾できるようにする
- コレクションはフィールドとしてキャパシティを設定して初期化し、クラス内で使いまわす
- 空の配列を扱う必要がある場合は`Array.Empty<T>`を用いる